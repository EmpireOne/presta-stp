;(function($){$.fn.extend({autocomplete:function(urlOrData,options){var isUrl=typeof urlOrData=="string";options=$.extend({},$.Autocompleter.defaults,{url:isUrl?urlOrData:null,data:isUrl?null:urlOrData,delay:isUrl?$.Autocompleter.defaults.delay:10,max:options&&!options.scroll?10:150},options);options.highlight=options.highlight||function(value){return value;};options.formatMatch=options.formatMatch||options.formatItem;return this.each(function(){new $.Autocompleter(this,options);});},result:function(handler){return this.bind("result",handler);},search:function(handler){return this.trigger("search",[handler]);},flushCache:function(){return this.trigger("flushCache");},setOptions:function(options){return this.trigger("setOptions",[options]);},unautocomplete:function(){return this.trigger("unautocomplete");}});$.Autocompleter=function(input,options){var KEY={UP:38,DOWN:40,DEL:46,TAB:9,RETURN:13,ESC:27,COMMA:188,PAGEUP:33,PAGEDOWN:34,BACKSPACE:8};var $input=$(input).attr("autocomplete","off").addClass(options.inputClass);var timeout;var previousValue="";var cache=$.Autocompleter.Cache(options);var hasFocus=0;var lastKeyPressCode;var config={mouseDownOnSelect:false};var select=$.Autocompleter.Select(options,input,selectCurrent,config);var blockSubmit;$.browser.opera&&$(input.form).bind("submit.autocomplete",function(){if(blockSubmit){blockSubmit=false;return false;}});$input.bind(($.browser.opera?"keypress":"keydown")+".autocomplete",function(event){lastKeyPressCode=event.keyCode;switch(event.keyCode){case KEY.UP:event.preventDefault();if(select.visible()){select.prev();}else{onChange(0,true);}
break;case KEY.DOWN:event.preventDefault();if(select.visible()){select.next();}else{onChange(0,true);}
break;case KEY.PAGEUP:event.preventDefault();if(select.visible()){select.pageUp();}else{onChange(0,true);}
break;case KEY.PAGEDOWN:event.preventDefault();if(select.visible()){select.pageDown();}else{onChange(0,true);}
break;case options.multiple&&$.trim(options.multipleSeparator)==","&&KEY.COMMA:case KEY.TAB:case KEY.RETURN:if(selectCurrent()){event.preventDefault();blockSubmit=true;return false;}
break;case KEY.ESC:select.hide();break;default:clearTimeout(timeout);timeout=setTimeout(onChange,options.delay);break;}}).focus(function(){hasFocus++;}).blur(function(){hasFocus=0;if(!config.mouseDownOnSelect){hideResults();}}).click(function(){if(hasFocus++>1&&!select.visible()){onChange(0,true);}}).bind("search",function(){var fn=(arguments.length>1)?arguments[1]:null;function findValueCallback(q,data){var result;if(data&&data.length){for(var i=0;i<data.length;i++){if(data[i].result.toLowerCase()==q.toLowerCase()){result=data[i];break;}}}
if(typeof fn=="function")fn(result);else $input.trigger("result",result&&[result.data,result.value]);}
$.each(trimWords($input.val()),function(i,value){request(value,findValueCallback,findValueCallback);});}).bind("flushCache",function(){cache.flush();}).bind("setOptions",function(){$.extend(options,arguments[1]);if("data"in arguments[1])
cache.populate();}).bind("unautocomplete",function(){select.unbind();$input.unbind();$(input.form).unbind(".autocomplete");});function selectCurrent(){var selected=select.selected();if(!selected)
return false;var v=selected.result;previousValue=v;if(options.multiple){var words=trimWords($input.val());if(words.length>1){v=words.slice(0,words.length-1).join(options.multipleSeparator)+options.multipleSeparator+v;}
v+=options.multipleSeparator;}
$input.val(v);hideResultsNow();$input.trigger("result",[selected.data,selected.value]);return true;}
function onChange(crap,skipPrevCheck){if(lastKeyPressCode==KEY.DEL){select.hide();return;}
var currentValue=$input.val();if(!skipPrevCheck&&currentValue==previousValue)
return;previousValue=currentValue;currentValue=lastWord(currentValue);if(currentValue.length>=options.minChars){$input.addClass(options.loadingClass);if(!options.matchCase)
currentValue=currentValue.toLowerCase();request(currentValue,receiveData,hideResultsNow);}else{stopLoading();select.hide();}};function trimWords(value){if(!value){return[""];}
var words=value.split(options.multipleSeparator);var result=[];$.each(words,function(i,value){if($.trim(value))
result[i]=$.trim(value);});return result;}
function lastWord(value){if(!options.multiple)
return value;var words=trimWords(value);return words[words.length-1];}
function autoFill(q,sValue){if(options.autoFill&&(lastWord($input.val()).toLowerCase()==q.toLowerCase())&&lastKeyPressCode!=KEY.BACKSPACE){$input.val($input.val()+sValue.substring(lastWord(previousValue).length));$.Autocompleter.Selection(input,previousValue.length,previousValue.length+sValue.length);}};function hideResults(){clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200);};function hideResultsNow(){var wasVisible=select.visible();select.hide();clearTimeout(timeout);stopLoading();if(options.mustMatch){$input.search(function(result){if(!result){if(options.multiple){var words=trimWords($input.val()).slice(0,-1);$input.val(words.join(options.multipleSeparator)+(words.length?options.multipleSeparator:""));}
else
$input.val("");}});}
if(wasVisible)
$.Autocompleter.Selection(input,input.value.length,input.value.length);};function receiveData(q,data){if(data&&data.length&&hasFocus){stopLoading();select.display(data,q);autoFill(q,data[0].value);select.show();}else{hideResultsNow();}};function request(term,success,failure){if(!options.matchCase)
term=term.toLowerCase();var data=cache.load(term);if(data&&data.length){success(term,data);}else if((typeof options.url=="string")&&(options.url.length>0)){var extraParams={timestamp:+new Date()};$.each(options.extraParams,function(key,param){extraParams[key]=typeof param=="function"?param():param;});$.ajax({mode:"abort",port:"autocomplete"+input.name,dataType:options.dataType,url:options.url,data:$.extend({q:lastWord(term),limit:options.max},extraParams),success:function(data){var parsed=options.parse&&options.parse(data)||parse(data);cache.add(term,parsed);success(term,parsed);}});}else{select.emptyList();failure(term);}};function parse(data){var parsed=[];var rows=data.split("\n");for(var i=0;i<rows.length;i++){var row=$.trim(rows[i]);if(row){row=row.split("|");parsed[parsed.length]={data:row,value:row[0],result:options.formatResult&&options.formatResult(row,row[0])||row[0]};}}
return parsed;};function stopLoading(){$input.removeClass(options.loadingClass);};};$.Autocompleter.defaults={inputClass:"ac_input",resultsClass:"ac_results",loadingClass:"ac_loading",minChars:1,delay:400,matchCase:false,matchSubset:true,matchContains:false,cacheLength:10,max:100,mustMatch:false,extraParams:{},selectFirst:true,formatItem:function(row){return row[0];},formatMatch:null,autoFill:false,width:0,multiple:false,multipleSeparator:", ",highlight:function(value,term){return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi,"\\$1")+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1</strong>");},scroll:true,scrollHeight:180};$.Autocompleter.Cache=function(options){var data={};var length=0;function matchSubset(s,sub){if(!options.matchCase)
s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains;};function add(q,value){if(length>options.cacheLength){flush();}
if(!data[q]){length++;}
data[q]=value;}
function populate(){if(!options.data)return false;var stMatchSets={},nullData=0;if(!options.url)options.cacheLength=1;stMatchSets[""]=[];for(var i=0,ol=options.data.length;i<ol;i++){var rawValue=options.data[i];rawValue=(typeof rawValue=="string")?[rawValue]:rawValue;var value=options.formatMatch(rawValue,i+1,options.data.length);if(value===false)
continue;var firstChar=value.charAt(0).toLowerCase();if(!stMatchSets[firstChar])
stMatchSets[firstChar]=[];var row={value:value,data:rawValue,result:options.formatResult&&options.formatResult(rawValue)||value};stMatchSets[firstChar].push(row);if(nullData++<options.max){stMatchSets[""].push(row);}};$.each(stMatchSets,function(i,value){options.cacheLength++;add(i,value);});}
setTimeout(populate,25);function flush(){data={};length=0;}
return{flush:flush,add:add,populate:populate,load:function(q){if(!options.cacheLength||!length)
return null;if(!options.url&&options.matchContains){var csub=[];for(var k in data){if(k.length>0){var c=data[k];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub.push(x);}});}}
return csub;}else
if(data[q]){return data[q];}else
if(options.matchSubset){for(var i=q.length-1;i>=options.minChars;i--){var c=data[q.substr(0,i)];if(c){var csub=[];$.each(c,function(i,x){if(matchSubset(x.value,q)){csub[csub.length]=x;}});return csub;}}}
return null;}};};$.Autocompleter.Select=function(options,input,select,config){var CLASSES={ACTIVE:"ac_over"};var listItems,active=-1,data,term="",needsInit=true,element,list;function init(){if(!needsInit)
return;element=$("<div/>").hide().addClass(options.resultsClass).css("position","absolute").appendTo(document.body);list=$("<ul/>").appendTo(element).mouseover(function(event){if(target(event).nodeName&&target(event).nodeName.toUpperCase()=='LI'){active=$("li",list).removeClass(CLASSES.ACTIVE).index(target(event));$(target(event)).addClass(CLASSES.ACTIVE);}}).click(function(event){$(target(event)).addClass(CLASSES.ACTIVE);select();input.focus();return false;}).mousedown(function(){config.mouseDownOnSelect=true;}).mouseup(function(){config.mouseDownOnSelect=false;});if(options.width>0)
element.css("width",options.width);needsInit=false;}
function target(event){var element=event.target;while(element&&element.tagName!="LI")
element=element.parentNode;if(!element)
return[];return element;}
function moveSelect(step){listItems.slice(active,active+1).removeClass(CLASSES.ACTIVE);movePosition(step);var activeItem=listItems.slice(active,active+1).addClass(CLASSES.ACTIVE);if(options.scroll){var offset=0;listItems.slice(0,active).each(function(){offset+=this.offsetHeight;});if((offset+activeItem[0].offsetHeight-list.scrollTop())>list[0].clientHeight){list.scrollTop(offset+activeItem[0].offsetHeight-list.innerHeight());}else if(offset<list.scrollTop()){list.scrollTop(offset);}}};function movePosition(step){active+=step;if(active<0){active=listItems.size()-1;}else if(active>=listItems.size()){active=0;}}
function limitNumberOfItems(available){return options.max&&options.max<available?options.max:available;}
function fillList(){list.empty();var max=limitNumberOfItems(data.length);for(var i=0;i<max;i++){if(!data[i])
continue;var formatted=options.formatItem(data[i].data,i+1,max,data[i].value,term);if(formatted===false)
continue;var li=$("<li/>").html(options.highlight(formatted,term)).addClass(i%2==0?"ac_even":"ac_odd").appendTo(list)[0];$.data(li,"ac_data",data[i]);}
listItems=list.find("li");if(options.selectFirst){listItems.slice(0,1).addClass(CLASSES.ACTIVE);active=0;}
if($.fn.bgiframe)
list.bgiframe();}
return{display:function(d,q){init();data=d;term=q;fillList();},next:function(){moveSelect(1);},prev:function(){moveSelect(-1);},pageUp:function(){if(active!=0&&active-8<0){moveSelect(-active);}else{moveSelect(-8);}},pageDown:function(){if(active!=listItems.size()-1&&active+8>listItems.size()){moveSelect(listItems.size()-1-active);}else{moveSelect(8);}},hide:function(){element&&element.hide();listItems&&listItems.removeClass(CLASSES.ACTIVE);active=-1;},visible:function(){return element&&element.is(":visible");},current:function(){return this.visible()&&(listItems.filter("."+CLASSES.ACTIVE)[0]||options.selectFirst&&listItems[0]);},show:function(){var offset=$(input).offset();element.css({width:typeof options.width=="string"||options.width>0?options.width:$(input).width(),top:offset.top+input.offsetHeight,left:offset.left}).show();if(options.scroll){list.css({maxHeight:options.scrollHeight,overflow:'auto'});if($.browser.msie&&typeof document.body.style.maxHeight==="undefined"){var listHeight=0;listItems.each(function(){listHeight+=this.offsetHeight;});var scrollbarsVisible=listHeight>options.scrollHeight;list.css('height',scrollbarsVisible?options.scrollHeight:listHeight);if(!scrollbarsVisible){listItems.width(list.width()-parseInt(listItems.css("padding-left"))-parseInt(listItems.css("padding-right")));}}}},selected:function(){var selected=listItems&&listItems.filter("."+CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);return selected&&selected.length&&$.data(selected[0],"ac_data");},emptyList:function(){list&&list.empty();},unbind:function(){element&&element.remove();}};};$.Autocompleter.Selection=function(field,start,end){if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select();}else if(field.setSelectionRange){field.setSelectionRange(start,end);}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end;}}
field.focus();};})(jQuery);;$(document).ready(function(){var $stepsearch_step_count=$('.stepsearch_step').length;function runSteps($step){$('#stepsearch_'+$step).unbind('change').change(function(){if($(this).find('.step_select').val())
{$('.step_search_btn').off('click');$('.stepsearch_tip').hide();$data='id='+$(this).find('.step_select').val()
if($step==$stepsearch_step_count)
{$data+='&finalpage=1';};$.ajax({url:baseDir+'/modules/stepsearch/stepsearch-ajax.php',type:'GET',dataType:'json',data:$data,success:function(data,textStatus,xhr){if($step==$stepsearch_step_count){$('#stepsearch_box div.hidden').fadeIn();window.location.href=data;}
else{fillnext(parseInt($step)+1,data);}},error:function(xhr,textStatus,errorThrown){alert('Error code '+textStatus+': '+errorThrown)}});}else{emptynext($step);}});}
runSteps(1);function fillnext($step,data)
{if(data.subfilters==null){$('#stepsearch_'+$step).find('.step_select').html(data.subfilters).attr('disabled',true);}else{$('#stepsearch_'+$step).find('.step_select').html(data.subfilters).attr('disabled',false);}
$next_to_clear=parseInt($step+1);$('#stepsearch_'+$next_to_clear).find('.step_select').html('<option value="">--</option>');$('.step_search_btn').replaceWith('<a class="step_search_btn" href="'+data.newpage+'" title="Search"></a>');runSteps($step);}
function emptynext($step)
{for(var i=(parseInt($step)+1);i<=$stepsearch_step_count;i++)
{$('#stepsearch_'+i).find('.step_select').html('<option value="">--</option>').attr('disabled',true);}
if((parseInt($step)==1)){$('.step_search_btn').replaceWith('<a class="step_search_btn" href="#" onclick="return false;" title="Search">Search</a>');$('.step_search_btn').click(function(){$('.stepsearch_tip').show();});}else{$('#stepsearch_'+(parseInt($step)-1)).change();}
runSteps($step);}
var labels=$('.stepsearch_step label');labels.each(function(){if($(this).text().indexOf('(')!=-1){var $tip=$(this).text().substring($(this).text().indexOf('('),$(this).text().length);var $original=$(this).text().substring(0,$(this).text().indexOf('('));$('<p class="stepsearch_tip">'+$tip+'</p>').hide().appendTo($(this).parent());$(this).text($original);};});$('.toggletips').live('click',function(){$('.stepsearch_tip').toggle('normal');});$('.step_search_btn').click(function(){$('.stepsearch_tip').show();});});;var options_prev=new Array();$(function(){CustomControls.init();$('.filterproductspro_seacher :button').click(function(){$(this).toggleClass('on off');});$('table.column_list').each(function(i,data){var del=true;$(this).contents().find('span.value_column').each(function(j,item){var value=$.trim($(item).html());if(value!=null&&value!=undefined&&value!=''&&value!='&nbsp;')
del=false;});if(del)
$(this).contents().find('span.value_column').remove();});FilterProducts.init();FilterProducts.assingDefaults();FilterProducts.registerEvents();CustomControls.clear();$('.filterproductspro_seacher').fadeIn();});var FilterProducts={_id_searcher:null,_options:{select:new Array(),checkbox:new Array(),radio:new Array(),button:new Array()},_dependencies:{},init:function(){$.blockUI.defaults.message='<img src="'+filterproductspro_img+'block_loader.gif" />';$.blockUI.defaults.overlayCSS.backgroundColor='#cecece';$.blockUI.defaults.css.border='none';$.blockUI.defaults.css.backgroundColor='transparent';$('.filterproductspro_seacher').find('select.filter_parent').attr('disabled',true);},assingDefaults:function(){$('div.filterproductspro_seacher div.block_content select[name="'+GLOBALS.Types.Select+'"]').val('');$('div.filterproductspro_seacher div.block_content input[type="'+GLOBALS.Types.Checkbox+'"]').attr('checked',false);$('div.filterproductspro_seacher div.block_content input[type="'+GLOBALS.Types.Radio+'"]').attr('checked',false);},resetFiltersDependency:function(select){if(select&&$(select).is('select')){var id_filter=$(select).attr('id').split('_')[2];var id_filter_parent=$(select).attr('id').split('_')[3];var _select=$('select[id^="filter_select_"][id$="_'+id_filter+'"]');if($(_select).length){var _id_filter=$(_select).attr('id').split('_')[2];var _id_filter_parent=$(_select).attr('id').split('_')[3];$(_select).attr('disabled',true).find('option:first').attr('selected',true);$(_select).empty();$('select#filter_backup_select_'+_id_filter+'_'+_id_filter_parent+'.filter_backup').find('option').clone().appendTo(_select);FilterProducts.resetFiltersDependency(_select);}else{if($(select).val()==''){$(select).empty();$('select#filter_backup_select_'+id_filter+'_'+id_filter_parent+'.filter_backup').find('option').clone().appendTo(select);var opts=$(select).find('option');var dependencies=$.data(FilterProducts._dependencies,$(select).attr('id').toString().split('_')[2]);if(dependencies){$.each(opts,function(i,opt){var id_option=$(opt).attr('value').toString().split('_')[1];if(id_option){if($.inArray(parseInt(id_option),dependencies)<0)
$(select).find('#option_'+id_option).remove();}});}}}}},_changeSelects:function(select,id_searcher,search){FilterProducts._options.select=new Array();if(FilterProducts._id_searcher!=id_searcher){FilterProducts._options.checkbox=new Array();FilterProducts._options.radio=new Array();FilterProducts._options.button=new Array();FilterProducts._id_searcher=id_searcher;}
var val_opt_selected=select!=null?(select.val()!=''?select.val():$(select).val()):null;var option=(select)?FilterProducts._getIdOptionFromControl(val_opt_selected):null;var id_filter=(select)?$(select).attr('id').split('_')[2]:null;FilterProducts.resetFiltersDependency(select);$('div.filterproductspro_seacher'+(id_searcher?'#searcher_'+id_searcher:'')+' div.block_content select[name="'+GLOBALS.Types.Select+'"]').find('option:selected').each(function(i,item){var id_control=$(item).val();if(id_control!=null&&id_control!=undefined&&FilterProducts._getIdOptionFromControl(id_control)!=null)
FilterProducts._options.select.push(FilterProducts._getIdOptionFromControl(id_control));});if(option&&!isNaN(option)&&id_filter&&!isNaN(id_filter)){$.ajax({url:filterproductspro_dir+'actions.php',type:'POST',dataType:'json',async:false,cache:false,data:{action:'getAvailableOptionsDependency',id_filter:id_filter,'options[]':FilterProducts.getOptions()},beforeSend:function(){},success:function(json){try{if(json.message_code==0){var id_filter_child=(json.data.id_filter_child)?json.data.id_filter_child:null;if(id_filter_child){var select_child=$('#searcher_'+id_searcher+' select#filter_select_'+id_filter_child+'_'+id_filter);var opts_child=$(select_child).find('option');if(json.data.cant_options_filter!=json.data.options.length){$('#searcher_'+id_searcher+' select#filter_select_'+id_filter_child+'_'+id_filter+' option:not(:first)').remove();$.each(json.data.options,function(i,id_option){$('select[id^="filter_backup_select_'+id_filter_child+'"].filter_backup #option_'+id_option).clone().appendTo(select_child);});}
if($(select_child).is(':disabled'))
$(select_child).removeAttr('disabled');$.data(FilterProducts._dependencies,id_filter_child.toString(),json.data.options);}else{$('select[id^="filter_select_'+id_filter+'"] > option:gt(0)').addClass('unremovable');}}
else
alert(json.message);}
catch($Exc){console.log('ERROR: '+$Exc);}},complete:function(){},error:function(XMLHttpRequest,textStatus,errorThrown){alert(XMLHttpRequest.responseText);}});}
if(search)
FilterProducts.search({id_searcher:id_searcher,id_filter:id_filter});},_changeRadios:function(id_searcher,search){FilterProducts._options.radio=new Array();if(FilterProducts._id_searcher!=id_searcher){FilterProducts._options.checkbox=new Array();FilterProducts._options.select=new Array();FilterProducts._options.button=new Array();FilterProducts._id_searcher=id_searcher;}
$('div.filterproductspro_seacher'+(id_searcher?'#searcher_'+id_searcher:'')+' div.block_content div.filter_content input[type="'+GLOBALS.Types.Radio+'"]:checked').each(function(i,control){var id_control=$(control).attr('id');if(id_control!=null&&id_control!=undefined)
FilterProducts._options.radio.push(FilterProducts._getIdOptionFromControl(id_control));});if(search)
FilterProducts.search({id_searcher:id_searcher});},_changeCheckboxs:function(id_searcher,search){FilterProducts._options.checkbox=new Array();if(FilterProducts._id_searcher!=id_searcher){FilterProducts._options.select=new Array();FilterProducts._options.radio=new Array();FilterProducts._options.button=new Array();FilterProducts._id_searcher=id_searcher;}
$('div.filterproductspro_seacher'+(id_searcher?'#searcher_'+id_searcher:'')+' div.block_content div.filter_content input[type="'+GLOBALS.Types.Checkbox+'"]:checked').each(function(i,item){var id_control=$(item).attr('id');if(id_control!=null&&id_control!=undefined)
FilterProducts._options.checkbox.push(FilterProducts._getIdOptionFromControl(id_control));});if(search)
FilterProducts.search({id_searcher:id_searcher});},_clickButtons:function(button,id_searcher,search){FilterProducts._options.button=new Array();if(FilterProducts._id_searcher!=id_searcher){FilterProducts._options.checkbox=new Array();FilterProducts._options.radio=new Array();FilterProducts._options.select=new Array();FilterProducts._id_searcher=id_searcher;}
if(button!=null&&button!=undefined){var is_multi_option=Boolean(parseInt($(button).attr('name').split('_').slice(1)[0]));if(!is_multi_option){$('div.filterproductspro_seacher'+(id_searcher?'#searcher_'+id_searcher:'')+' div.block_content input[name="'+$(button).attr('name')+'"]').not($(button)).removeClass('on').addClass('off');}}
$('div.filterproductspro_seacher'+(id_searcher?'#searcher_'+id_searcher:'')+' div.block_content input[type="'+GLOBALS.Types.Button+'"].on').each(function(i,control){var id_control=$(control).attr('id');if(id_control!=null&&id_control!=undefined)
FilterProducts._options.button.push(FilterProducts._getIdOptionFromControl(id_control));});if(search)
FilterProducts.search({id_searcher:id_searcher});},registerEvents:function(){$('div.filterproductspro_seacher div.block_content select[name="'+GLOBALS.Types.Select+'"]').change(function(){var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];FilterProducts._changeSelects($(this),id_searcher,true);});$('div.filterproductspro_seacher div.block_content input[type="'+GLOBALS.Types.Checkbox+'"]').change(function(){var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];FilterProducts._changeCheckboxs(id_searcher,true);});$('div.filterproductspro_seacher div.block_content input[type="'+GLOBALS.Types.Radio+'"]').change(function(){var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];FilterProducts._changeRadios(id_searcher,true);});$('div.filterproductspro_seacher div.block_content input[type="'+GLOBALS.Types.Button+'"]').click(function(){var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];FilterProducts._clickButtons($(this),id_searcher,true);});$('span.one_filter').click(function(){var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];CustomControls.resetByFilter({filters:new Array($(this).attr('name')),id_searcher:id_searcher});});$('span.clear_all_filters').click(function(){var ids_filter=new Array();$(this).parent().parent().find('.filter_content').each(function(i,filter){ids_filter.push($(filter).attr('id'));});var id_searcher=$(this).parents('.filterproductspro_seacher:last').attr('id').split('_')[1];CustomControls.resetByFilter({filters:ids_filter,id_searcher:id_searcher});});$('.go_search').click(function(){var id_searcher=$(this).attr('id').split('_')[2];if(id_searcher)
FilterProducts.search({id_searcher:id_searcher,force_search:true});});$('.wrapper_name .expand').toggle(function(){var _self=$(this);_self.parent().siblings().not('.clear').not(':radio').not(':checkbox').not('.filter_backup').hide();},function(){var _self=$(this);_self.parent().siblings().not('.clear').not(':radio').not(':checkbox').not('.filter_backup').show();}).click(function(){$(this).toggleClass('off on');});$('.wrapper_name .expand').trigger('click');},getOptions:function(){try{var options=new Array();$.each(FilterProducts._options,function(key,data){$.each(data,function(i,id_option){if($.inArray(id_option,options)<0)
options.push(id_option);});});return options;}
catch($Exc){return new Array();}},search:function(params){var p=$.extend({},{id_searcher:null,id_filter:null,force_search:false},params);var options=FilterProducts.getOptions();if(options.length)
FilterProducts._unavailableOptions({options:options,id_searcher:p.id_searcher,id_filter:p.id_filter});else{$('#searcher_'+p.id_searcher+' label[for^="option_"], #searcher_'+p.id_searcher+' span[name^="option_"], #searcher_'+p.id_searcher+' :button.fpp_button').fadeIn();$('#searcher_'+p.id_searcher+' select[id^="filter_backup_select_"].filter_backup').each(function(i,select){var _id_filter=$(select).attr('id').split('_')[3];var _id_filter_parent=$(select).attr('id').split('_')[4];var _select=$('#searcher_'+p.id_searcher+' select#filter_select_'+_id_filter+'_'+_id_filter_parent);var val_id_option_selected=$(_select).val();$(_select).empty();$('select#filter_backup_select_'+_id_filter+'_'+_id_filter_parent+'.filter_backup').find('option').clone().appendTo(_select);$('#searcher_'+p.id_searcher+' select#filter_select_'+_id_filter+'_'+_id_filter_parent+' option[value="'+val_id_option_selected+'"]').attr('selected','true');});}
if((!p.force_search&&$('#go_search_'+p.id_searcher).length))
return;$.ajax({url:fpp_is_ps_15?baseDir+'index.php?fc=module&module=filterproductspro&controller=search':filterproductspro_dir+'filterproductspro_search.php',type:'POST',async:true,cache:false,data:{'options[]':options,'p':1,'id_category':id_category,'id_manufacturer':id_manufacturer,'id_supplier':id_supplier,'id_searcher':p.id_searcher,'ajax':true},beforeSend:function(){FilterProducts._blockUI();},success:function(html){try{$(id_content_results).fadeOut(250,function(){$(id_content_results+'>*:not(.filterproductspro_seacher_home)').remove();$(this).append(html).fadeIn(250,FilterProducts._overrideEvents);$('.ajax_add_to_cart_button').unbind('click').click(function(){var idProduct=$(this).attr('rel').replace('ajax_id_product_','');if($(this).attr('disabled')!='disabled')
ajaxCart.add(idProduct,null,false,this);return false;});});}
catch($Exc){console.log('ERROR: '+$Exc);}},complete:function(){FilterProducts._unblockUI();},error:function(XMLHttpRequest,textStatus,errorThrown){alert(XMLHttpRequest.responseText);}});return true;},_unavailableOptions:function(params){var p=$.extend({},{id_searcher:null,id_filter:null},params);if(!p.id_searcher)
return;$.ajax({url:filterproductspro_dir+'actions.php',type:'POST',dataType:'json',async:false,cache:false,data:{action:'getUnavailableOptionsByOptions','options[]':p.options,id_searcher:p.id_searcher,id_filter:p.id_filter,'id_category':id_category,'id_manufacturer':id_manufacturer,'id_supplier':id_supplier},beforeSend:function(){FilterProducts._blockUI();},success:function(json){try{if(json.message_code==0){var ids_options=new Array();var options_unavailable=new Array();$.each(json.data,function(id_filter,data){if(data.options!=undefined)
$.each(data.options,function(i,id_option){options_unavailable.push(id_option);});if(data.options_select!=undefined)
$.each(data.options_select,function(i,id_option){options_unavailable.push(id_option);});});var _options_prev=options_prev[p.id_searcher];if(_options_prev!=undefined&&_options_prev!=''){$.each(_options_prev,function(i,id_option_prev){var option_to_show=false;$.each(options_unavailable,function(i,id_option){if(id_option_prev==id_option){option_to_show=true;return true;}});if(!option_to_show){$('#searcher_'+p.id_searcher+' label[for="option_'+id_option_prev+'"], #searcher_'+p.id_searcher+' span[name="option_'+id_option_prev+'"], #searcher_'+p.id_searcher+' #'+id_option_prev).fadeIn();}});}
$.each(json.data,function(id_filter,data){var selector='#searcher_'+p.id_searcher+' select[id^="filter_select_'+id_filter+'_"]';var selector_backup='#searcher_'+p.id_searcher+' select[id^="filter_backup_select_'+id_filter+'_"]';var val_option_selected=$(selector).val();$(selector+' option:not(:first)').remove();if(data.options!=undefined)
$.each(data.options,function(i,id_option){if(data.type==GLOBALS.Types.Button)
if($('#searcher_'+p.id_searcher+' #option_'+id_option).is(':button'))
$('#option_'+id_option).fadeOut();if(data.type==GLOBALS.Types.Checkbox||data.type==GLOBALS.Types.Radio)
$('#searcher_'+p.id_searcher+' label[for="option_'+id_option+'"], #searcher_'+p.id_searcher+' span[name="option_'+id_option+'"]').hide();ids_options.push(id_option);});if(data.options_select!=undefined)
$.each(data.options_select,function(i,id_option){var _option=$(selector_backup+'.filter_backup #option_'+id_option).clone();$(selector).append(_option);ids_options.push(id_option);});$(selector+' option[value='+val_option_selected+']').attr('selected','true');});options_prev[p.id_searcher]=options_unavailable;}
else
alert(json.message);}
catch($Exc){console.log('ERROR: '+$Exc);}},complete:function(){FilterProducts._unblockUI();},error:function(XMLHttpRequest,textStatus,errorThrown){alert(XMLHttpRequest.responseText);}});},_getIdOptionFromControl:function(str){var val=str.split('_')[1];return(val!=null&&val!=undefined&&val!=''&&typeof(val)!='undefined')?val:null;},_overrideEvents:function(){var options=FilterProducts.getOptions();$(this).find('ul.pagination a').click(function(event){var url=$(this).attr('href');if(url==null||url==undefined||url==''){event.stopPropagation();event.preventDefault();}
if($('#selectPrductSort').length>0)
var splitData=$('#selectPrductSort').val().split(':');else
var splitData=new Array('','');FilterProducts._callAjaxOverrides(event,url,'options='+options+'&id_category='+id_category+'&id_manufacturer='+id_manufacturer+'&id_supplier='+id_supplier+
($('#nb_item').val()!=undefined&&$('#nb_item').val()!=''?'&n='+$('#nb_item').val():'')+'&orderby='+splitData[0]+'&orderway='+splitData[1]+'&id_searcher='+FilterProducts._id_searcher);});$(this).find('div#pagination :submit').click(function(event){var form=$(this).parents('form');var url=$(form).attr('action');if(url==null||url==undefined||url==''){event.stopPropagation();event.preventDefault();}
if($('#selectPrductSort').length>0)
var splitData=$('#selectPrductSort').val().split(':');else
var splitData=new Array('','');FilterProducts._callAjaxOverrides(event,url,'options='+options+'&id_category='+id_category+'&id_manufacturer='+id_manufacturer+'&id_supplier='+id_supplier+'&'+$(form).serialize()+'&orderby='+splitData[0]+'&orderway='+splitData[1]+'&id_searcher='+FilterProducts._id_searcher);});$('#selectPrductSort').removeAttr('onchange').unbind().change(function(event){var form=$(this).parents('form');var url=$(form).attr('action');if(url==null||url==undefined||url==''){event.stopPropagation();event.preventDefault();}
var splitData=new Array('position','asc');if($(this).val().match(/[a-z]:[a-z0-9]/gi))
splitData=$(this).val().split(':');else{url='';var vars=$(this).val().split('?');vars=vars[1]=undefined?vars[1]:vars[1].split('&');var orderby=vars[0]!=undefined?vars[0]:'';var orderway=vars[1]!=undefined?vars[1]:'';if(orderby!=''&&orderway!='')
splitData=new Array(orderby.split('=')[1],orderway.split('=')[1]);}
FilterProducts._callAjaxOverrides(event,url,'options='+options+'&id_category='+id_category+'&id_manufacturer='+id_manufacturer+'&id_supplier='+id_supplier+
($('#nb_item').val()!=undefined&&$('#nb_item').val()!=''?'&n='+$('#nb_item').val():'')+'&orderby='+splitData[0]+'&orderway='+splitData[1]+'&id_searcher='+FilterProducts._id_searcher);});},_callAjaxOverrides:function(event,url,data){var extra_params=url.split('p=');$.ajax({url:(fpp_is_ps_15?baseDir+'index.php?fc=module&module=filterproductspro&controller=search'+(extra_params[1]!=undefined?'&p='+extra_params[1]:''):filterproductspro_dir+'filterproductspro_search.php'+(extra_params[1]!=undefined?'?p='+extra_params[1]:'')),type:'POST',async:true,cache:false,data:data+'&ajax=true',beforeSend:function(){FilterProducts._blockUI();},success:function(html){try{$(id_content_results).fadeOut(250,function(){$(id_content_results+'>*:not(.filterproductspro_seacher_home)').remove();$(this).append(html).fadeIn(250,FilterProducts._overrideEvents);$('.ajax_add_to_cart_button').unbind('click').click(function(){var idProduct=$(this).attr('rel').replace('ajax_id_product_','');if($(this).attr('disabled')!='disabled')
ajaxCart.add(idProduct,null,false,this);return false;});});}
catch($Exc){console.log('ERROR: '+$Exc);}},complete:function(){FilterProducts._unblockUI();},error:function(XMLHttpRequest,textStatus,errorThrown){alert(XMLHttpRequest.responseText);}});event.stopPropagation();event.preventDefault();},_blockUI:function(params){var p=$.extend({},{msg:null},params);$('div.filterproductspro_seacher, '+id_content_results).block((p.msg!=null?{message:p.msg}:{}));},_unblockUI:function(){$('div.filterproductspro_seacher, '+id_content_results).unblock();}}
var CustomControls={params:{},init:function(params){var p=$.extend({},{checkboxHeight:25,radioHeight:25},params);this.params=p;$('.filterproductspro_seacher input.radio, .filterproductspro_seacher input.checkbox').each(function(i,item){var span=$('<span></span>').addClass(item.type).attr({name:$(item).attr('id')});if($(item).is(':checked'))
$(span).css({backgroundPosition:'0 -'+((item.type=='checkbox')?(p.checkboxHeight*2):(p.radioHeight*2))+'px'});$(item).hide().before(span).click(function(){CustomControls.clear();});$('label[for="'+$(item).attr('id')+'"]').css({height:p.radioHeight}).click(function(){CustomControls.clear();});if(!$(item).attr('disabled')){$(span).mousedown(function(){CustomControls.pushed($(this))}).mouseup(function(){CustomControls.check($(this))});}});$('.filterproductspro_seacher, .filterproductspro_seacher label').mouseup(function(){CustomControls.clear()});},pushed:function(el){var input=$(el).next();var type=$(input).attr('type');if(type=='checkbox')
$(el).css('backgroundPosition','0 -'+(this.params.checkboxHeight*($(input).is(':checked')?3:1))+'px');else if(type=='radio')
$(el).css('backgroundPosition','0 -'+(this.params.radioHeight*($(input).is(':checked')?3:1))+'px');},check:function(el){var input=$(el).next();var type=$(input).attr('type');if($(input).is(':checked')){$(el).css('backgroundPosition','0 0');$(input).attr('checked',false).trigger('change');}
else{if(type=='checkbox')
$(el).css('backgroundPosition','0 -'+(CustomControls.params.checkboxHeight*2)+'px');else if(type=='radio'){$(el).css('backgroundPosition','0 -'+(CustomControls.params.radioHeight*2)+'px');$('input[name="'+$(input).attr('name')+'"]').not(input).prev().css('backgroundPosition','0 0');}
$(input).attr('checked',true).trigger('change');}},clear:function(){$('.filterproductspro_seacher input.radio, .filterproductspro_seacher input.checkbox').each(function(i,item){var type=$(item).attr('type');var checked=$(item).is(':checked');if(type=='checkbox'||type=='radio'){$(item).next()[checked?'addClass':'removeClass']('on');}
if(type=='checkbox'&&checked)
$(item).prev().css('backgroundPosition','0 -'+(CustomControls.params.checkboxHeight*2)+'px');else if(type=='checkbox'&&!checked)
$(item).prev().css('backgroundPosition','0 0');else if(type=='radio'&&checked)
$(item).prev().css('backgroundPosition','0 -'+(CustomControls.params.radioHeight*2)+'px');else if(type=='radio')
$(item).prev().css('backgroundPosition','0 0');});},resetByFilter:function(params){var p=$.extend({},{filters:new Array(),id_searcher:null},params);$.each(p.filters,function(i,id_filter){if(id_filter!=null&&id_filter!=undefined){var filter=$('#'+id_filter);if($(filter).length){$(filter).find('select:not(.filter_backup)').each(function(i,select){var _id_filter=$(select).attr('id').split('_')[2];var _select=$('select[id^="filter_select_"][id$="_'+_id_filter+'"]');var opts=$(select).find('option');var dependencies=$.data(FilterProducts._dependencies,$(select).attr('id').toString().split('_')[2]);if(dependencies){$.each(opts,function(i,opt){var id_option=$(opt).attr('value').toString().split('_')[1];if(id_option){if($.inArray(parseInt(id_option),dependencies)<0)
$(select).find('#option_'+id_option).remove();}});}});$(filter).find('select').val('');$(filter).find(':checkbox:checked').attr('checked',false);$(filter).find(':radio:checked').attr('checked',false);$(filter).find(':button.on').removeClass('on').addClass('off');}}});FilterProducts._changeSelects(null,p.id_searcher,false);FilterProducts._changeRadios(p.id_searcher,false);FilterProducts._changeCheckboxs(p.id_searcher,false);FilterProducts._clickButtons(null,p.id_searcher,false);FilterProducts.search({id_searcher:p.id_searcher});CustomControls.clear();}};
/*!
 * jQuery blockUI plugin
 * Version 2.39 (23-MAY-2011)
 * @requires jQuery v1.2.3 or later
 *
 * Examples at: http://malsup.com/jquery/block/
 * Copyright (c) 2007-2010 M. Alsup
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 * Thanks to Amir-Hossein Sobhi for some excellent contributions!
 */
;(function($){if(/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery)||/^1.1/.test($.fn.jquery)){alert('blockUI requires jQuery v1.2.3 or later!  You are using v'+$.fn.jquery);return;}
$.fn._fadeIn=$.fn.fadeIn;var noOp=function(){};var mode=document.documentMode||0;var setExpr=$.browser.msie&&(($.browser.version<8&&!mode)||mode<8);var ie6=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent)&&!mode;$.blockUI=function(opts){install(window,opts);};$.unblockUI=function(opts){remove(window,opts);};$.growlUI=function(title,message,timeout,onClose){var $m=$('<div class="growlUI"></div>');if(title)$m.append('<h1>'+title+'</h1>');if(message)$m.append('<h2>'+message+'</h2>');if(timeout==undefined)timeout=3000;$.blockUI({message:$m,fadeIn:700,fadeOut:1000,centerY:false,timeout:timeout,showOverlay:false,onUnblock:onClose,css:$.blockUI.defaults.growlCSS});};$.fn.block=function(opts){return this.unblock({fadeOut:0}).each(function(){if($.css(this,'position')=='static')
this.style.position='relative';if($.browser.msie)
this.style.zoom=1;install(this,opts);});};$.fn.unblock=function(opts){return this.each(function(){remove(this,opts);});};$.blockUI.version=2.39;$.blockUI.defaults={message:'<h1>Please wait...</h1>',title:null,draggable:true,theme:false,css:{padding:0,margin:0,width:'30%',top:'40%',left:'35%',textAlign:'center',color:'#000',border:'3px solid #aaa',backgroundColor:'#fff',cursor:'wait'},themedCSS:{width:'30%',top:'40%',left:'35%'},overlayCSS:{backgroundColor:'#000',opacity:0.6,cursor:'wait'},growlCSS:{width:'350px',top:'10px',left:'',right:'10px',border:'none',padding:'5px',opacity:0.6,cursor:'default',color:'#fff',backgroundColor:'#000','-webkit-border-radius':'10px','-moz-border-radius':'10px','border-radius':'10px'},iframeSrc:/^https/i.test(window.location.href||'')?'javascript:false':'about:blank',forceIframe:false,baseZ:1000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onBlock:null,onUnblock:null,quirksmodeOffsetHack:4,blockMsgClass:'blockMsg'};var pageBlock=null;var pageBlockEls=[];function install(el,opts){var full=(el==window);var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});var css=$.extend({},$.blockUI.defaults.css,opts.css||{});var themedCSS=$.extend({},$.blockUI.defaults.themedCSS,opts.themedCSS||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock)
remove(window,{fadeOut:0});if(msg&&typeof msg!='string'&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data('blockUI.history',data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent)
data.parent.removeChild(node);}
$(el).data('blockUI.onUnblock',opts.onUnblock);var z=opts.baseZ;var lyr1=($.browser.msie||opts.forceIframe)?$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>'):$('<div class="blockUI" style="display:none"></div>');var lyr2=opts.theme?$('<div class="blockUI blockOverlay ui-widget-overlay" style="z-index:'+(z++)+';display:none"></div>'):$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var lyr3,s;if(opts.theme&&full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:fixed">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>'+'<div class="ui-widget-content ui-dialog-content"></div>'+'</div>';}
else if(opts.theme){s='<div class="blockUI '+opts.blockMsgClass+' blockElement ui-dialog ui-widget ui-corner-all" style="z-index:'+(z+10)+';display:none;position:absolute">'+'<div class="ui-widget-header ui-dialog-titlebar ui-corner-all blockTitle">'+(opts.title||'&nbsp;')+'</div>'+'<div class="ui-widget-content ui-dialog-content"></div>'+'</div>';}
else if(full){s='<div class="blockUI '+opts.blockMsgClass+' blockPage" style="z-index:'+(z+10)+';display:none;position:fixed"></div>';}
else{s='<div class="blockUI '+opts.blockMsgClass+' blockElement" style="z-index:'+(z+10)+';display:none;position:absolute"></div>';}
lyr3=$(s);if(msg){if(opts.theme){lyr3.css(themedCSS);lyr3.addClass('ui-widget-content');}
else
lyr3.css(css);}
if(!opts.theme&&(!opts.applyPlatformOpacityRules||!($.browser.mozilla&&/Linux/.test(navigator.platform))))
lyr2.css(opts.overlayCSS);lyr2.css('position',full?'fixed':'absolute');if($.browser.msie||opts.forceIframe)
lyr1.css('opacity',0.0);var layers=[lyr1,lyr2,lyr3],$par=full?$('body'):$(el);$.each(layers,function(){this.appendTo($par);});if(opts.theme&&opts.draggable&&$.fn.draggable){lyr3.draggable({handle:'.ui-dialog-titlebar',cancel:'li'});}
var expr=setExpr&&(!$.boxModel||$('object,embed',full?null:el).length>0);if(ie6||expr){if(full&&opts.allowBodyStretch&&$.boxModel)
$('html,body').css('height','100%');if((ie6||!$.boxModel)&&!full){var t=sz(el,'borderTopWidth'),l=sz(el,'borderLeftWidth');var fixT=t?'(0 - '+t+')':0;var fixL=l?'(0 - '+l+')':0;}
$.each([lyr1,lyr2,lyr3],function(i,o){var s=o[0].style;s.position='absolute';if(i<2){full?s.setExpression('height','Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:'+opts.quirksmodeOffsetHack+') + "px"'):s.setExpression('height','this.parentNode.offsetHeight + "px"');full?s.setExpression('width','jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression('width','this.parentNode.offsetWidth + "px"');if(fixL)s.setExpression('left',fixL);if(fixT)s.setExpression('top',fixT);}
else if(opts.centerY){if(full)s.setExpression('top','(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"');s.marginTop=0;}
else if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top):0;var expression='((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + '+top+') + "px"';s.setExpression('top',expression);}});}
if(msg){if(opts.theme)
lyr3.find('.ui-widget-content').append(msg);else
lyr3.append(msg);if(msg.jquery||msg.nodeType)
$(msg).show();}
if(($.browser.msie||opts.forceIframe)&&opts.showOverlay)
lyr1.show();if(opts.fadeIn){var cb=opts.onBlock?opts.onBlock:noOp;var cb1=(opts.showOverlay&&!msg)?cb:noOp;var cb2=msg?cb:noOp;if(opts.showOverlay)
lyr2._fadeIn(opts.fadeIn,cb1);if(msg)
lyr3._fadeIn(opts.fadeIn,cb2);}
else{if(opts.showOverlay)
lyr2.show();if(msg)
lyr3.show();if(opts.onBlock)
opts.onBlock();}
bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(':input:enabled:visible',pageBlock);if(opts.focusInput)
setTimeout(focus,20);}
else
center(lyr3[0],opts.centerX,opts.centerY);if(opts.timeout){var to=setTimeout(function(){full?$.unblockUI(opts):$(el).unblock(opts);},opts.timeout);$(el).data('blockUI.timeout',to);}};function remove(el,opts){var full=(el==window);var $el=$(el);var data=$el.data('blockUI.history');var to=$el.data('blockUI.timeout');if(to){clearTimeout(to);$el.removeData('blockUI.timeout');}
opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);if(opts.onUnblock===null){opts.onUnblock=$el.data('blockUI.onUnblock');$el.removeData('blockUI.onUnblock');}
var els;if(full)
els=$('body').children().filter('.blockUI').add('body > .blockUI');else
els=$('.blockUI',el);if(full)
pageBlock=pageBlockEls=null;if(opts.fadeOut){els.fadeOut(opts.fadeOut);setTimeout(function(){reset(els,data,opts,el);},opts.fadeOut);}
else
reset(els,data,opts,el);};function reset(els,data,opts,el){els.each(function(i,o){if(this.parentNode)
this.parentNode.removeChild(this);});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent)
data.parent.appendChild(data.el);$(el).removeData('blockUI.history');}
if(typeof opts.onUnblock=='function')
opts.onUnblock(el,opts);};function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data('blockUI.isBlocked')))
return;if(!full)
$el.data('blockUI.isBlocked',b);if(!opts.bindEvents||(b&&!opts.showOverlay))
return;var events='mousedown mouseup keydown keypress';b?$(document).bind(events,opts,handler):$(document).unbind(events,handler);};function handler(e){if(e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target===els[els.length-1];var back=e.shiftKey&&e.target===els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false;}}}
var opts=e.data;if($(e.target).parents('div.'+opts.blockMsgClass).length>0)
return true;return $(e.target).parents().children().filter('div.blockUI').length==0;};function focus(back){if(!pageBlockEls)
return;var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e)
e.focus();};function center(el,x,y){var p=el.parentNode,s=el.style;var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,'borderLeftWidth');var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,'borderTopWidth');if(x)s.left=l>0?(l+'px'):'0';if(y)s.top=t>0?(t+'px'):'0';};function sz(el,p){return parseInt($.css(el,p))||0;};})(jQuery);;function openBranch(jQueryElement,noAnimation){jQueryElement.addClass('OPEN').removeClass('CLOSE');if(noAnimation)
jQueryElement.parent().find('ul:first').show();else
jQueryElement.parent().find('ul:first').slideDown();}
function closeBranch(jQueryElement,noAnimation){jQueryElement.addClass('CLOSE').removeClass('OPEN');if(noAnimation)
jQueryElement.parent().find('ul:first').hide();else
jQueryElement.parent().find('ul:first').slideUp();}
function toggleBranch(jQueryElement,noAnimation){if(jQueryElement.hasClass('OPEN'))
closeBranch(jQueryElement,noAnimation);else
openBranch(jQueryElement,noAnimation);}
$(document).ready(function(){if(!$('ul.tree.dhtml').hasClass('dynamized'))
{$('ul.tree.dhtml ul').prev().before("<span class='grower OPEN'> </span>");$('ul.tree.dhtml ul li:last-child, ul.tree.dhtml li:last-child').addClass('last');$('ul.tree.dhtml span.grower.OPEN').addClass('CLOSE').removeClass('OPEN').parent().find('ul:first').hide();$('ul.tree.dhtml').show();$('ul.tree.dhtml .selected').parents().each(function(){if($(this).is('ul'))
toggleBranch($(this).prev().prev(),true);});toggleBranch($('ul.tree.dhtml .selected').prev(),true);$('ul.tree.dhtml span.grower').click(function(){toggleBranch($(this));});$('ul.tree.dhtml').addClass('dynamized');$('ul.tree.dhtml').removeClass('dhtml');}});;var cs_serialScrollNbImagesDisplayed;var cs_serialScrollNbImages;var cs_serialScrollActualImagesIndex;function cs_serialScrollFixLock(event,targeted,scrolled,items,position)
{serialScrollNbImages=$('#crossselling_list li:visible').length;serialScrollNbImagesDisplayed=5;var leftArrow=position==0?true:false;var rightArrow=position+serialScrollNbImagesDisplayed>=serialScrollNbImages?true:false;$('a#crossselling_scroll_left').css('cursor',leftArrow?'default':'pointer').css('display',leftArrow?'none':'block').fadeTo(0,leftArrow?0:1);$('a#crossselling_scroll_right').css('cursor',rightArrow?'default':'pointer').fadeTo(0,rightArrow?0:1).css('display',rightArrow?'none':'block');return true;}
$(document).ready(function(){if($('#crossselling_list').length>0)
{cs_serialScrollNbImages=$('#crossselling_list li').length;cs_serialScrollNbImagesDisplayed=5;cs_serialScrollActualImagesIndex=0;$('#crossselling_list').serialScroll({items:'li',prev:'a#crossselling_scroll_left',next:'a#crossselling_scroll_right',axis:'x',offset:0,stop:true,onBefore:cs_serialScrollFixLock,duration:300,step:1,lazy:true,lock:false,force:false,cycle:false});$('#crossselling_list').trigger('goto',[cs_middle-3]);}});;(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var p=(e.type=="mouseover"?e.fromElement:e.toElement)||e.relatedTarget;while(p&&p!=this){try{p=p.parentNode;}catch(e){p=this;}}
if(p==this){return false;}
var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}
if(e.type=="mouseover"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},cfg.interval);}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.mouseover(handleHover).mouseout(handleHover);};})(jQuery);;;(function($){$.fn.superfish=function(op){var sf=$.fn.superfish,c=sf.c,$arrow=$(['<span class="',c.arrowClass,'"> &#187;</span>'].join('')),over=function(){var $$=$(this),menu=getMenu($$);clearTimeout(menu.sfTimer);$$.showSuperfishUl().siblings().hideSuperfishUl();},out=function(){var $$=$(this),menu=getMenu($$),o=sf.op;clearTimeout(menu.sfTimer);menu.sfTimer=setTimeout(function(){o.retainPath=($.inArray($$[0],o.$path)>-1);$$.hideSuperfishUl();if(o.$path.length&&$$.parents(['li.',o.hoverClass].join('')).length<1){over.call(o.$path);}},o.delay);},getMenu=function($menu){var menu=$menu.parents(['ul.',c.menuClass,':first'].join(''))[0];sf.op=sf.o[menu.serial];return menu;},addArrow=function($a){$a.addClass(c.anchorClass).append($arrow.clone());};return this.each(function(){var s=this.serial=sf.o.length;var o=$.extend({},sf.defaults,op);o.$path=$('li.'+o.pathClass,this).slice(0,o.pathLevels).each(function(){$(this).addClass([o.hoverClass,c.bcClass].join(' ')).filter('li:has(ul)').removeClass(o.pathClass);});sf.o[s]=sf.op=o;$('li:has(ul)',this)[($.fn.hoverIntent&&!o.disableHI)?'hoverIntent':'hover'](over,out).each(function(){if(o.autoArrows)addArrow($('>a:first-child',this));}).not('.'+c.bcClass).hideSuperfishUl();var $a=$('a',this);$a.each(function(i){var $li=$a.eq(i).parents('li');$a.eq(i).focus(function(){over.call($li);}).blur(function(){out.call($li);});});o.onInit.call(this);}).each(function(){menuClasses=[c.menuClass];if(sf.op.dropShadows&&!($.browser.msie&&$.browser.version<7))menuClasses.push(c.shadowClass);$(this).addClass(menuClasses.join(' '));});};var sf=$.fn.superfish;sf.o=[];sf.op={};sf.IE7fix=function(){var o=sf.op;if($.browser.msie&&$.browser.version>6&&o.dropShadows&&o.animation.opacity!=undefined)
this.toggleClass(sf.c.shadowClass+'-off');};sf.c={bcClass:'sf-breadcrumb',menuClass:'sf-js-enabled',anchorClass:'sf-with-ul',arrowClass:'sf-sub-indicator',shadowClass:'sf-shadow'};sf.defaults={hoverClass:'sfHover',pathClass:'overideThisToUse',pathLevels:1,delay:800,animation:{opacity:'show'},speed:'fast',autoArrows:true,dropShadows:true,disableHI:false,onInit:function(){},onBeforeShow:function(){},onShow:function(){},onHide:function(){}};$.fn.extend({hideSuperfishUl:function(){var o=sf.op,not=(o.retainPath===true)?o.$path:'';o.retainPath=false;var $ul=$(['li.',o.hoverClass].join(''),this).add(this).not(not).removeClass(o.hoverClass).find('>ul').hide().css('visibility','hidden');o.onHide.call($ul);return this;},showSuperfishUl:function(){var o=sf.op,sh=sf.c.shadowClass+'-off',$ul=this.addClass(o.hoverClass).find('>ul:hidden').css('visibility','visible');sf.IE7fix.call($ul);o.onBeforeShow.call($ul);$ul.animate(o.animation,o.speed,function(){sf.IE7fix.call($ul);o.onShow.call($ul);});return this;}});})(jQuery);jQuery(function(){jQuery('ul.sf-menu').superfish();});;